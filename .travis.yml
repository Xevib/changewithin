language: python
python:
  - "2.7"
  - "3.6"

# http://docs.travis-ci.com/user/apt/
addons:
    apt:
        sources:
            - boost-latest
            - ubuntu-toolchain-r-test
        packages:
            - g++-4.8
            - gcc-4.8
            - libboost-python1.55-dev
            - libboost1.55-dev
            - libsparsehash-dev
            - python-nose
            - python3
            - python3-dev
            - python3-nose
            - python3-setuptools

install:
 - pip install -r requirements.txt
 - pip install -r requirements-dev.txt
 - pip install coveralls
 - sudo apt-get install python-lxml
 - git clone --quiet --depth 1 https://github.com/osmcode/libosmium.git ../libosmium
 - git clone --quiet --depth 1 https://github.com/osmcode/pyosmium.git ../pyosmium
 - cd ../pyosmium
 - python${USE_PYTHON_VERSION} --version
 - python${USE_PYTHON_VERSION} setup.py build
script:
 - PYTHONPATH="." coverage run test/test.py && coverage report
 - coveralls
