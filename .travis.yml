dist: trusty
language: python
python:
  - "2.7"
  - "3.6"

# http://docs.travis-ci.com/user/apt/
addons:
    apt:
        sources:
            - boost-latest
            - ubuntu-toolchain-r-test
        packages:
            - g++-4.8
            - gcc-4.8
            - libboost-python1.55-dev
            - libboost1.55-dev
            - libsparsehash-dev
            - python-nose
            - python3
            - python3-dev
            - python3-nose
            - python3-setuptools
before_install:
 - sudo apt-get install python-lxml gcc cmake libgeos++-dev libgdal-dev libsparsehash-dev libboost-dev libbz2-dev zlib1g-dev libexpat1-dev libutfcpp-dev libosmpbf-dev libprotobuf-dev protobuf-compiler cmake-curses-gui make
install:
 - pip install -r requirements.txt
 - pip install -r requirements-dev.txt
 - pip install coveralls
 - git clone --quiet --depth 1 https://github.com/osmcode/libosmium.git ../libosmium
 - git clone --quiet --depth 1 https://github.com/osmcode/pyosmium.git ../pyosmium
 - cd ../pyosmium
 - python setup.py build
script:
 - PYTHONPATH="." coverage run test/test.py && coverage report
 - coveralls
